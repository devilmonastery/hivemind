version: '3.8'

services:
  hivemind-server:
    image: hivemind-server
    container_name: hivemind-server
    ports:
      - "4153:4153"
    environment:
      - CGO_ENABLED=0
    volumes:
      - ./configs/dev-server.yaml:/app/configs/dev-server.yaml:ro
      - ./migrations:/app/migrations:ro
    depends_on:
      postgres:
        condition: service_healthy
    networks:
      - default
    command: ["-config", "/app/configs/dev-server.yaml"]

networks:
  default:
    external: true
    name: dev_default
